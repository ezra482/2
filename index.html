<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>刷视频&直播赚钱模拟</title>
<style>
body, html { margin:0; padding:0; background:#000; color:#fff; font-family: Arial; }
#ui { position:absolute; top:10px; left:10px; z-index:10; }
button { margin:5px; padding:8px 12px; border:none; border-radius:5px; cursor:pointer; background:#ff3c3c; color:#fff; }
input { padding:5px; border-radius:5px; border:none; margin:5px; }
#coins { margin-bottom:5px; font-size:16px; }
#videoContainer { width:100%; height:70vh; display:flex; justify-content:center; align-items:center; }
video, iframe { width:100%; height:100%; border:none; border-radius:10px; }
#ads { display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:#222; padding:20px; border-radius:10px; text-align:center; z-index:20; }
</style>
</head>
<body>

<div id="ui">
  <div id="coins">金币: 0</div>
  <button onclick="signIn()">签到</button>
  <button onclick="watchAd()">看广告赚金币</button>
  <input type="text" id="search" placeholder="搜索视频">
  <button onclick="searchVideo()">搜索</button>
  <button onclick="showLive()">直播</button>
</div>

<div id="videoContainer">
  <video id="videoPlayer" autoplay muted></video>
</div>

<div id="ads">
  <p>广告：请等待 5 秒...</p>
  <button id="adBtn" disabled>领取金币</button>
</div>

<script>
// --- 视频列表 ---
const videos = [
  {title:"视频1", url:"https://www.w3schools.com/html/mov_bbb.mp4"},
  {title:"视频2", url:"https://www.w3schools.com/html/movie.mp4"},
  {title:"视频3", url:"https://www.w3schools.com/html/mov_bbb.mp4"}
];
let currentVideos = [...videos];
let currentIndex = 0;

// --- 用户金币 ---
let coins = parseInt(localStorage.getItem('coins')) || 0;
function updateCoins(){ document.getElementById('coins').innerText = "金币: "+coins; localStorage.setItem('coins',coins);}
updateCoins();

// --- 视频播放 ---
const videoPlayer = document.getElementById('videoPlayer');
function playVideo(index){ currentIndex=index; videoPlayer.src=currentVideos[currentIndex].url; videoPlayer.play(); }
playVideo(0);

videoPlayer.addEventListener('ended', ()=>{
  currentIndex=(currentIndex+1)%currentVideos.length;
  playVideo(currentIndex);
});

// --- 搜索视频 ---
function searchVideo(){
  const keyword = document.getElementById('search').value.trim().toLowerCase();
  if(!keyword){ currentVideos = [...videos]; playVideo(0); return; }
  currentVideos = videos.filter(v=>v.title.toLowerCase().includes(keyword));
  if(currentVideos.length>0) playVideo(0);
  else alert("未找到视频！");
}

// --- 签到 ---
function signIn(){
  const today = new Date().toLocaleDateString();
  if(localStorage.getItem('lastSignIn')===today){ alert("今天已签到！"); return; }
  coins+=10; localStorage.setItem('lastSignIn',today); updateCoins(); alert("签到获得10金币！");
}

// --- 广告 ---
function watchAd(){
  const adsDiv = document.getElementById('ads');
  const adBtn = document.getElementById('adBtn');
  adsDiv.style.display='block'; adBtn.disabled=true;
  let countdown=5+Math.floor(Math.random()*5);
  adsDiv.querySelector('p').innerText=`广告：请等待 ${countdown} 秒...`;
  const interval=setInterval(()=>{
    countdown--;
    adsDiv.querySelector('p').innerText=`广告：请等待 ${countdown} 秒...`;
    if(countdown<=0){ clearInterval(interval); adBtn.disabled=false; adsDiv.querySelector('p').innerText="广告结束！点击领取金币"; }
  },1000);
  adBtn.onclick=()=>{
    let reward=5+Math.floor(Math.random()*6); coins+=reward; updateCoins(); alert(`广告奖励${reward}金币！`); adsDiv.style.display='none';
  }
}

// --- 直播 ---
function showLive(){
  const liveUrl="https://www.youtube.com/embed/live_stream?channel=UC4R8DWoMoI7CAwX8_LjQHig"; // 示例YouTube直播
  const container=document.getElementById('videoContainer');
  container.innerHTML=`<iframe src="${liveUrl}" allowfullscreen></iframe>`;
}
</script>

</body>
</html>
